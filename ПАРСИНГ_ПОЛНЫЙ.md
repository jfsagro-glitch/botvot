# Полный парсинг канала с сохранением форматирования

## Текущая ситуация

В `data/lessons.json` сейчас только 2 урока (22 и 23). Нужно спарсить все 30 уроков из канала.

## Запуск полного парсинга

### Шаг 1: Установка зависимостей

```bash
pip install telethon
```

### Шаг 2: Получение API ключей

1. Перейдите на https://my.telegram.org/
2. Войдите с вашим номером телефона
3. Перейдите в раздел "API development tools"
4. Создайте приложение и получите:
   - `api_id` (число)
   - `api_hash` (строка)

### Шаг 3: Запуск парсинга

```bash
python scripts/parse_channel_full.py
```

Скрипт попросит ввести:
- API ID
- API Hash
- Username канала или ID (например, `@StartNowAI_bot` или `-1001234567890`)

**Важно:** Если канал приватный, используйте его ID (формат: `-1001234567890`)

### Шаг 4: Результаты парсинга

После парсинга будут созданы:
- `data/raw_channel.json` - все сообщения с полным форматированием
- `data/by_days.json` - сообщения, сгруппированные по дням
- `media/` - папка с медиа-файлами (фото, видео)

### Шаг 5: Создание маппинга

Создайте файл `data/days_mapping.json`:

```json
{
  "1": ["2023-11-01"],
  "2": ["2023-11-02"],
  "3": ["2023-11-03"],
  ...
  "30": ["2023-11-30"]
}
```

Где ключ - день курса (1-30), значение - список дат из канала.

### Шаг 6: Сборка уроков

```bash
python scripts/build_lessons.py
```

Это создаст `data/lessons.json` со всеми уроками.

## Особенности парсинга

✅ Сохраняет все эмодзи
✅ Сохраняет форматирование (абзацы, списки)
✅ Скачивает все медиа-файлы
✅ Сохраняет даты и время сообщений
✅ Группирует по дням

## Проверка результатов

После парсинга проверьте:

```bash
python scripts/check_lessons.py
```

Это покажет:
- Количество уроков
- Какие дни есть
- Количество медиа на урок
- Длину текста

