# Настройка реальной оплаты

## Подключение YooKassa

YooKassa - популярная платежная система в России и странах СНГ.

### Шаг 1: Регистрация в YooKassa

1. Зайдите в личный кабинет: https://yookassa.ru/my/i/aSR_d_SeRsnM/l
2. Перейдите в раздел **"Настройки"** → **"API"**
3. Скопируйте **Shop ID** и **Secret Key**
4. Для тестирования используйте тестовые ключи из раздела "Тестовые данные"

### Шаг 2: Установка библиотеки

```bash
pip install yookassa
```

### Шаг 3: Настройка переменных окружения

**Вариант 1: Автоматическая настройка (рекомендуется)**

Запустите скрипт настройки:
```bash
python setup_yookassa.py
```

Скрипт попросит ввести Shop ID и Secret Key и автоматически обновит файл `.env`.

**Вариант 2: Ручная настройка**

Добавьте в файл `.env`:

```env
# Выбор платежной системы: "mock" или "yookassa"
PAYMENT_PROVIDER=yookassa

# YooKassa настройки
YOOKASSA_SHOP_ID=ваш_shop_id
YOOKASSA_SECRET_KEY=ваш_secret_key
YOOKASSA_RETURN_URL=https://t.me/StartNowQ_bot

# Валюта платежей (RUB, USD, EUR и т.д.)
PAYMENT_CURRENCY=RUB
```

### Шаг 4: Перезапуск бота

После настройки перезапустите бота:

```bash
python -m bots.sales_bot
```

## Тестирование

Для тестирования используйте тестовые данные YooKassa:
- Shop ID: тестовый ID из личного кабинета
- Secret Key: тестовый ключ из личного кабинета
- Тестовые карты: https://yookassa.ru/developers/payment-acceptance/testing-and-going-live/testing

## Переключение обратно на mock оплату

Если нужно вернуться к тестовой оплате:

```env
PAYMENT_PROVIDER=mock
```

## Важно

- По умолчанию используется mock оплата (для разработки)
- Для продакшена обязательно настройте реальную оплату
- Храните Secret Key в безопасности, не коммитьте в Git

